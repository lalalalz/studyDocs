# 우분투 SSH 설정

## 1. 우분투 SSH 설정

### 1.1. SSH Sever 설치
--------------------------------------------------------------------------------
  원격으로 접속할 PC의 Open SSH Server를 설치한다. 

``` terminal

	$ sudo apt update
	$ sudo apt install openssh-server

```

### 1.2. SSH Sever 실행 확인
--------------------------------------------------------------------------------
  SSH를 설치하면 자동으로 실행되며 다음 명령어를 통해 실행을 확인할 수 있다.

``` terminal

	$ sudo systemctl status ssh
	ssh.service - OpenBSD Secure Shell server
   	  Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)
      Active: active (running) since Tue 2021-08-03 19:12:39 KST; 6h ago
        Docs: man:sshd(8)
              man:sshd_config(5)
    Main PID: 22984 (sshd)
      Tasks: 1 (limit: 19102)
     Memory: 8.9M
     CGroup: /system.slice/ssh.service
             └─22984 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups

```

### 1.3. SSH 작동원리
--------------------------------------------------------------------------------
  Secure Shell Protocol의 약어로 네트워크 프로토콜이다. 다른 인터넷 서비스 프로토콜보다 보안성이 뛰어나다는 특징을 가지고 있어 원격 제어 상황에서 사용할 수 있다. 

  SSH는 SSH-Sever에 접속할 때 비대칭키 방식을 사용하여 SSH-Client를 인증한다. 그렇게 인증이 된 후에는 대칭키 방식을 사용하여 메시지를 주고받는다. 이와 같은 절차들을 통해 보안성을 확보하는 것이다. 

#### 1.3.1. 클라이언트 인증
  클라이언트가 서버에 공개키를 전달하면 서버는 해당 공개키를 이용하여 랜덤한 값을 생성하여 클라이언트로 전송한다. 만약, 해당 클라이언트가 유효하다면 전송받은 랜덤한 값을 복호화 하여 해당 값을 서버로 전송한다. 마지막으로 서버는 전달받은 값을 처음 만들 때 사용했던 값과 같은지 비교하여 같으면 인증을 마친다. 

#### 1.3.2. 서버 인증
  클라이언트 인증 방식과 원리는 같다. 따라서 클라이언트와 서버의 역할을 바꾸어 인증을 진행한다. 

#### 1.3.3. 정보교환
  위와 같은 인증 절차가 끝났다면, 서버와 클라이언트는 각각 서로 공개키를 주고 받은 상황이 되어 암호화 통신이 가능하다. 이때, 비대칭키 암호화 통신을 통해 대칭키(세션키)를 공유한다. 그 이후 대칭키(세션키)를 모든 정보교환에 사용하여 암호화 통신을 한다. 

![img1](./img/ssh_1.jpg)

위 그림은 SSH 절차 예시를 나타낸 것인데 각 키에 대한 설명이 잘못 표현되어 있다. 왼쪽의 비밀키는 공개키로 오른쪽의 공개키는 기본키로 바뀌어야 한다. 

### 1.4. 우분투 SSH 설정 방법
--------------------------------------------------------------------------------

